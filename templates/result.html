<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css" integrity="sha384-jLKHWM3JRmfMU0A5x5AkjWkw/EYfGUAGagvnfryNV3F9VqM98XiIH7VBGVoxVSc7" crossorigin="anonymous">
  <title>URL Shortener</title>
  <script type="text/javascript">
    function copy() {
  var copyText = document.getElementById("url");
  copyText.select();
  copyText.setSelectionRange(0, 99999);
  navigator.clipboard.writeText(copyText.value);
  alert("Copied the text: " + copyText.value);
}
  </script>
</head>
<style type="text/css">
  .center{
    position: absolute;
    left: 50%;
    transform: translate(-50%,-50%);
    margin-top: 30px;
  }
</style>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <button class="navbar-toggler" type="button" data-toggle='collapse' data-target='#navbar'><span class="navbar-toggler-icon"></span></button>
    <div class="collapse navbar-collapse" id='navbar'>
      <div class="navbar-nav">
        <a style="padding-left: 20px;" class="nav-item nav-link" id='home' href="/">Home</a>
      </div>
    </div>
  </nav>
  {%with messages=get_flashed_messages(with_categories=true)%}
    {%if messages%}
      {%for category, message in messages%}
        {%if category=='error'%}
          <div class="alert alert-danger d-flex align-items-center" role="alert">
            <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
            <div>{{message}}</div>
          </div>
        {%endif%}
        {%if category=='success'%}
          <div class="alert alert-success d-flex align-items-center" role="alert">
            <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>
            <div>{{message}}</div>
          </div>
        {%endif%}
      {%endfor%}
    {%endif%}
  {%endwith%}

  <div class="container" style="height: 100vh">
    <form>
      <h3 style="text-align: center;margin-top: 50px;margin-bottom: 20px;font-size: 2.5rem;">Shorten URL</h3>
      <div style="display:none;" class="form-floating mb-3">
      <input type="text" value="{{title}}" readonly class="form-control" name="title" id="title" placeholder="none">
      <label for="title">Page Title</label>
    </div>
    <div class="form-floating mb-3">
      <input type="text" value="{{link}}" readonly class="form-control" name="url" id="url" placeholder="none">
      <label for="url">Shorten URL</label>
    </div>
    <div class="center">
      <button style="font-size: 1em;" class="btn btn-primary" id="copybtn"><a style="text-decoration: none;color: white;" href="/">Copy and Back to Home</a></button>
    </div>
    </form>

  </div>
</body>
<footer>
  <script type="text/javascript">
    const url = document.getElementById('url');
    const copybtn = document.getElementById('copybtn');
    copybtn.onclick = function () {
      url.select();
      document.execCommand('Copy');
    }
  </script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <div style="background-color: black;padding-top: 10px;padding-bottom: 10px;"><p style="color: white;text-align: center;">&copy; Copyright 2021 URL Shortener - All rights reserved</p></div>
</footer>
</html>
